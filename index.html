<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar√ßa Site | Personal Portal</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <nav class="nav-container">
            <div class="logo">BAR√áA<span class="gold">SITE</span></div>
            
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>

            <ul class="nav-links" id="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#timer">Match Center</a></li>
                <li><a href="#trophies">Trophies</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero" id="home">
        <div class="hero-overlay">
            <span class="est-tag">ESTABLISHED 1899</span>
            <h1>M√âS QUE UN CLUB</h1>
            <p class="slogan-bottom">VISCA EL BAR√áA</p>
        </div>
    </section>

    <section class="timer-section" id="timer">
        <div class="timer-card">
            <div class="match-status" id="status-label">NEXT MATCH</div>
            <h2 class="match-title">BAR√áA <span class="gold-text">VS</span> <span id="opponent-name">...</span></h2>
            <p class="match-meta" id="match-date-display">Loading next fixture...</p>
            
            <div class="countdown-grid">
                <div class="time-box"><span id="days">00</span><p>Days</p></div>
                <div class="time-box"><span id="hours">00</span><p>Hours</p></div>
                <div class="time-box"><span id="mins">00</span><p>Mins</p></div>
                <div class="time-box"><span id="secs">00</span><p>Secs</p></div>
            </div>
        </div>
    </section>

    <main class="container">
        <section id="news" class="section" style="padding-bottom: 50px;">
            <h2 class="section-title">Bar√ßa Pulse <span class="live-dot"></span></h2>
            <div id="news-container" class="news-grid">
                <p class="loading">Fetching latest news...</p>
            </div>
        </section>

        <section id="trophies" class="section">
            <h2 class="section-title">Official Trophy Cabinet</h2>
            <div class="trophy-grid">
                <a href="ucl.html" style="text-decoration: none;">
                    <div class="trophy-card interactive-card">
                        <img src="ucl.png" alt="Champions League">
                        <h4>5 Champions League</h4>
                        <p class="click-hint">Tap to view History ‚ûî</p>
                    </div>
                </a>
                <div class="trophy-card"><img src="liga.png" alt="La Liga"><h4>28 La Liga</h4></div>
                <div class="trophy-card"><img src="copa.png" alt="Copa del Rey"><h4>32 Copa del Rey</h4></div>
            </div>

            <h2 class="section-title" style="margin-top: 50px;">Historical Records</h2>
            <div class="table-wrapper">
                <table class="pro-table">
                    <thead>
                        <tr><th>Season</th><th>Silverware Won</th><th>Top Scorer</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>2024-25</td><td>üèÜ La Liga, üèÜ Copa del Rey</td><td>Lewandowski</td></tr>
                        <tr><td>2023-24</td><td class="trophyless">Gone trophyless this season</td><td>Lewandowski</td></tr>
                        <tr><td>2022-23</td><td>üèÜ La Liga, üèÜ Spanish Super Cup</td><td>Lewandowski</td></tr>
                        <tr><td>2021-22</td><td class="trophyless">Gone trophyless this season</td><td>Memphis Depay</td></tr>
                        <tr><td>2020-21</td><td>üèÜ Copa del Rey</td><td>Lionel Messi</td></tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <footer><p>Visca el Bar√ßa! | barca-site &copy; 2026</p></footer>

    <script>
        let countdownInterval;

        // 1. AUTO FIXTURE LOGIC
        async function fetchNextFixture() {
            const apiKey = '38355029a465447bab7a203cb102e058';
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            // Bar√ßa Team ID is 81. Status scheduled finds the next game.
            const targetUrl = 'https://api.football-data.org/v4/teams/81/matches?status=SCHEDULED&limit=1';

            try {
                const response = await fetch(proxyUrl + encodeURIComponent(targetUrl), {
                    headers: { 'X-Auth-Token': apiKey }
                });
                const data = await response.json();
                
                if (data.matches && data.matches.length > 0) {
                    const match = data.matches[0];
                    const opponent = match.homeTeam.id === 81 ? match.awayTeam.name : match.homeTeam.name;
                    const matchTime = new Date(match.utcDate).getTime();

                    // Update UI
                    document.getElementById('opponent-name').innerText = opponent.toUpperCase();
                    document.getElementById('match-date-display').innerText = new Date(match.utcDate).toLocaleString('en-GB', { 
                        weekday: 'long', day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' 
                    }) + ' UTC';

                    // Start Countdown
                    if (countdownInterval) clearInterval(countdownInterval);
                    countdownInterval = setInterval(() => updateTimer(matchTime), 1000);
                    updateTimer(matchTime);
                }
            } catch (e) {
                console.error("Fixture error:", e);
                document.getElementById('match-date-display').innerText = "Fixture update pending...";
            }
        }

        function updateTimer(matchTime) {
            const now = new Date().getTime();
            const gap = matchTime - now;
            const second = 1000, minute = second * 60, hour = minute * 60, day = hour * 24;

            if (gap <= 0) {
                document.getElementById('status-label').innerText = "MATCH LIVE";
                return;
            }

            document.getElementById('days').innerText = Math.floor(gap / day).toString().padStart(2, '0');
            document.getElementById('hours').innerText = Math.floor((gap % day) / hour).toString().padStart(2, '0');
            document.getElementById('mins').innerText = Math.floor((gap % hour) / minute).toString().padStart(2, '0');
            document.getElementById('secs').innerText = Math.floor((gap % minute) / second).toString().padStart(2, '0');
        }

        // 2. NEWS HUB FETCH
        async function fetchBarcaNews() {
            const apiKey = 'a144ee981ae649ba9f906b0a86b14635';
            const proxyUrl = 'https://api.allorigins.win/raw?url=';
            const targetUrl = `https://newsapi.org/v2/everything?q=FC+Barcelona&sortBy=publishedAt&language=en&pageSize=3&apiKey=${apiKey}`;
            try {
                const response = await fetch(proxyUrl + encodeURIComponent(targetUrl));
                const data = await response.json();
                const container = document.getElementById('news-container');
                if (data.status === "ok") {
                    container.innerHTML = ''; 
                    data.articles.forEach(article => {
                        container.innerHTML += `
                            <div class="news-card">
                                <img src="${article.urlToImage || 'https://via.placeholder.com/400x200/111/edbb00?text=Bar√ßa+News'}" class="news-image">
                                <div class="news-content">
                                    <h3>${article.title}</h3>
                                    <p>${article.description ? article.description.substring(0, 100) + '...' : 'Latest updates.'}</p>
                                    <a href="${article.url}" target="_blank" class="gold-btn" style="font-size: 0.8rem; padding: 10px 20px; text-decoration: none;">Read More</a>
                                </div>
                            </div>`;
                    });
                }
            } catch (e) { document.getElementById('news-container').innerHTML = '<p>News update pending...</p>'; }
        }

        // Initial Calls
        fetchNextFixture();
        fetchBarcaNews();

        // 3. MOBILE MENU
        const menuToggle = document.querySelector('#mobile-menu');
        const navLinks = document.querySelector('#nav-links');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active'); 
            menuToggle.classList.toggle('is-active');
        });
    </script>
</body>
</html>
