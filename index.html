<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barça Site | Home of the Blaugrana</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <nav class="nav-container">
            <div class="logo">BARÇA<span class="gold">SITE</span></div>
            <div class="menu-toggle" id="mobile-menu">
                <span class="bar"></span><span class="bar"></span><span class="bar"></span>
            </div>
            <ul class="nav-links" id="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="ucl.html">UCL History</a></li>
                <li><a href="1992.html">1992 Archive</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1>MÉS QUE UN CLUB</h1>
            <p>Experience the history and future of FC Barcelona.</p>
        </div>
    </section>

    <section class="news-hub container">
        <h2 class="section-title">Barça Pulse <span class="live-dot"></span></h2>
        <div id="news-container" class="news-grid">
            <p class="loading">Fetching latest Barça news...</p>
        </div>
    </section>

    <footer>
        <p>Visca el Barça! | barca-site &copy; 2026</p>
    </footer>

    <script>
        const menuToggle = document.querySelector('#mobile-menu');
        const navLinks = document.querySelector('#nav-links');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active'); 
            menuToggle.classList.toggle('is-active');
        });
    </script>

    <script>
        async function fetchBarcaNews() {
            // Your Personal API Key
            const apiKey = 'a144ee981ae649ba9f906b0a86b14635';
            
            /* We are searching specifically for FC Barcelona. 
               The pageSize=3 ensures we only get the top 3 stories to keep the grid clean.
            */
            const url = `https://newsapi.org/v2/everything?q=FC+Barcelona&sortBy=publishedAt&language=en&pageSize=3&apiKey=${apiKey}`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                const container = document.getElementById('news-container');
                
                if (data.status === "error") {
                    throw new Error(data.message);
                }

                container.innerHTML = ''; // Clear loading text

                data.articles.forEach(article => {
                    // We check if an image exists; if not, we use a placeholder
                    const card = `
                        <div class="news-card">
                            <img src="${article.urlToImage || 'https://via.placeholder.com/400x200/111/edbb00?text=Barça+News'}" class="news-image">
                            <div class="news-content">
                                <h3>${article.title}</h3>
                                <p>${article.description ? article.description.substring(0, 100) + '...' : 'Latest updates from the Camp Nou.'}</p>
                                <a href="${article.url}" target="_blank" class="gold-btn" style="font-size: 0.8rem; padding: 5px 15px; text-decoration: none; display: inline-block;">Read Full Story</a>
                            </div>
                        </div>
                    `;
                    container.innerHTML += card;
                });
            } catch (error) {
                console.error('Error fetching news:', error);
                document.getElementById('news-container').innerHTML = 
                    '<p style="color: #ccc; text-align: center; grid-column: 1/-1;">Note: Automatic news is ready. If it fails to load on GitHub, please try viewing on a local server or using a CORS proxy.</p>';
            }
        }

        // Initial fetch on page load
        fetchBarcaNews();
        // Automatically check for new news every 30 minutes
        setInterval(fetchBarcaNews, 1800000);
    </script>
</body>
</html>
